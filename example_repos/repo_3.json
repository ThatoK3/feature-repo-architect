{
  "repository": {
    "name": "water_treatment_ml_platform",
    "location": "/opt/feast/water_treatment",
    "defaultOwner": "Environmental Analytics Team",
    "id": 1,
    "description": "Water treatment process optimization and quality prediction platform for municipal and industrial water facilities. POPIA-compliant with minimal personal data (facility operators only). Uses MSSQL (SCADA process control), MySQL (chemical inventory), MongoDB (sensor telemetry), PostgreSQL (compliance reporting), and S3 (historical process data). 4 entities: TreatmentUnit, WaterSource, ChemicalBatch, and QualitySample. Supports ML models for process optimization, predictive maintenance, contaminant detection, and regulatory compliance forecasting with full explainability for engineering decisions."
  },
  "nodes": [
    [
      "source_1",
      {
        "id": "source_1",
        "type": "datasource",
        "name": "SCADA Process Control SQL Server",
        "kind": "sqlserver",
        "dbType": {
          "name": "SQL Server",
          "category": "Relational",
          "debezium": true,
          "icon": "ðŸ—ƒï¸",
          "defaultProcess": "Process engineering data access request",
          "sparkPattern": "MS JDBC with time-series extensions for process data"
        },
        "description": "Real-time process control data, pump states, valve positions, and flow rates from treatment plant SCADA",
        "tags": [
          "scada",
          "process-control",
          "operational",
          "critical"
        ],
        "ownedBy": "Process Engineering Team",
        "accessProcess": "1. Process engineer authorization\n2. Safety and operational risk review\n3. SQL Server read-only replica with audit\n4. Data historian access certification",
        "details": {
          "connection": "sqlserver://scada.water.local:1433/ProcessHistorian",
          "notes": "Debezium CDC for real-time process alerts\nTime-series: Process data historian\nSafety: Critical infrastructure protection\nRetention: 10 years for regulatory compliance\nEncryption: TDE + column-level for setpoints"
        },
        "x": 120,
        "y": 680,
        "inputs": [],
        "outputs": [],
        "createdAt": "2026-03-01T08:00:00Z",
        "debeziumAvailable": true,
        "sparkPattern": "MS JDBC with time-series extensions for process data",
        "columnSecurity": {
          "piiColumns": [
            "operator_id",
            "shift_supervisor"
          ],
          "maskedColumns": [
            "operator_id"
          ],
          "restrictedColumns": [
            "security_system_codes",
            "emergency_shutdown_protocols"
          ]
        }
      }
    ],
    [
      "source_2",
      {
        "id": "source_2",
        "type": "datasource",
        "name": "Chemical Inventory MySQL",
        "kind": "mysql",
        "dbType": {
          "name": "MySQL",
          "category": "Relational",
          "debezium": true,
          "icon": "ðŸ¬",
          "defaultProcess": "Environmental compliance officer approval",
          "sparkPattern": "JDBC with SSL and chemical handling audit trail"
        },
        "description": "Chemical dosing records, inventory levels, safety data sheets, and consumption tracking",
        "tags": [
          "chemical",
          "inventory",
          "safety",
          "compliance"
        ],
        "ownedBy": "Environmental Compliance Team",
        "accessProcess": "1. Environmental compliance officer approval\n2. Chemical handling safety verification\n3. MySQL read replica with SSL\n4. SDS (Safety Data Sheet) access training",
        "details": {
          "connection": "mysql://chemicals.water.local:3306/inventory",
          "notes": "Debezium for low-stock alerts\nSafety: Hazardous material tracking\nCompliance: SANS 10228 chemical classification\nRetention: 15 years for environmental audit\nAggregation: Batch-level consumption only"
        },
        "x": 120,
        "y": 820,
        "inputs": [],
        "outputs": [],
        "createdAt": "2026-03-01T08:00:00Z",
        "debeziumAvailable": true,
        "sparkPattern": "JDBC with SSL and chemical handling audit trail",
        "columnSecurity": {
          "piiColumns": [
            "supplier_contact",
            "delivery_driver_ref"
          ],
          "maskedColumns": [
            "supplier_contact"
          ],
          "restrictedColumns": [
            "hazardous_material_locations",
            "security_stock_levels"
          ]
        }
      }
    ],
    [
      "source_3",
      {
        "id": "source_3",
        "type": "datasource",
        "name": "Sensor Telemetry MongoDB",
        "kind": "mongodb",
        "dbType": {
          "name": "MongoDB",
          "category": "NoSQL",
          "debezium": true,
          "icon": "ðŸƒ",
          "defaultProcess": "Instrumentation team data access",
          "sparkPattern": "MongoDB Spark connector with time-series collections"
        },
        "description": "High-frequency sensor data from pH, turbidity, chlorine, flow, and pressure instruments",
        "tags": [
          "sensor",
          "telemetry",
          "high-frequency",
          "iot"
        ],
        "ownedBy": "Instrumentation Team",
        "accessProcess": "1. Instrumentation engineer approval\n2. Sensor calibration data handling\n3. MongoDB time-series collection access\n4. Measurement uncertainty acknowledgment",
        "details": {
          "connection": "mongodb://sensors.water.local:27017/telemetry",
          "notes": "Time-series: 1-minute granularity with TTL\nChange streams: Anomaly detection alerts\nRetention: 2 years raw, 10 years hourly aggregates\nCalibration: Sensor drift tracking\nNo PII: Equipment data only"
        },
        "x": 120,
        "y": 960,
        "inputs": [],
        "outputs": [],
        "createdAt": "2026-03-01T08:00:00Z",
        "debeziumAvailable": true,
        "sparkPattern": "MongoDB Spark connector with time-series collections",
        "columnSecurity": {
          "piiColumns": [],
          "maskedColumns": [],
          "restrictedColumns": []
        }
      }
    ],
    [
      "source_4",
      {
        "id": "source_4",
        "type": "datasource",
        "name": "Compliance Reporting PostgreSQL",
        "kind": "postgres",
        "dbType": {
          "name": "PostgreSQL",
          "category": "Relational",
          "debezium": true,
          "icon": "ðŸ˜",
          "defaultProcess": "Regulatory affairs approval for Blue Drop reporting",
          "sparkPattern": "JDBC with row-level security for facility zones"
        },
        "description": "Laboratory results, regulatory compliance reports, Blue Drop assessments, and audit trails",
        "tags": [
          "compliance",
          "regulatory",
          "blue-drop",
          "quality"
        ],
        "ownedBy": "Regulatory Affairs Team",
        "accessProcess": "1. Regulatory affairs manager approval\n2. Blue Drop reporting requirements verification\n3. PostgreSQL RLS for facility access\n4. DWA (Department of Water Affairs) compliance check",
        "details": {
          "connection": "postgresql://compliance.water.local:5432/regulatory",
          "notes": "Row-level security: Municipal vs industrial facilities\nDebezium: Compliance deadline alerts\nBlue Drop: South African water quality grading\nRetention: 20 years for regulatory archive\nAudit: Full traceability for inspections"
        },
        "x": 120,
        "y": 1100,
        "inputs": [],
        "outputs": [],
        "createdAt": "2026-03-01T08:00:00Z",
        "debeziumAvailable": true,
        "sparkPattern": "JDBC with row-level security for facility zones",
        "columnSecurity": {
          "piiColumns": [
            "lab_technician_id",
            "inspector_ref"
          ],
          "maskedColumns": [
            "lab_technician_id"
          ],
          "restrictedColumns": [
            "enforcement_actions",
            "confidential_remediation_plans"
          ]
        }
      }
    ],
    [
      "source_5",
      {
        "id": "source_5",
        "type": "datasource",
        "name": "Process Archive S3",
        "kind": "s3",
        "dbType": {
          "name": "Amazon S3 (Parquet)",
          "category": "Object Storage",
          "debezium": false,
          "icon": "ðŸª£",
          "defaultProcess": "Data science governance committee approval",
          "sparkPattern": "S3A with Parquet and predicate pushdown for time ranges"
        },
        "description": "Historical process data, seasonal patterns, and model training datasets for water treatment optimization",
        "tags": [
          "archive",
          "historical",
          "training",
          "seasonal"
        ],
        "ownedBy": "Data Science Platform Team",
        "accessProcess": "1. Data science governance approval\n2. Process data anonymization verification\n3. S3 IAM with VPC endpoint restriction\n4. Model lineage and reproducibility check",
        "details": {
          "connection": "s3://water-treatment-ml/process-archive/",
          "notes": "Partitioned: facility/year/month/process_stage\nFormat: Parquet with Snappy compression\nRetention: 15 years for seasonal pattern analysis\nLineage: MLflow tracking for model versions\nAccess: VPC endpoint only, no public access\nPOPIA: No personal data, process parameters only"
        },
        "x": 120,
        "y": 120,
        "inputs": [],
        "outputs": [],
        "createdAt": "2026-03-01T08:00:00Z",
        "debeziumAvailable": false,
        "sparkPattern": "S3A with Parquet and predicate pushdown for time ranges",
        "columnSecurity": {
          "piiColumns": [],
          "maskedColumns": [],
          "restrictedColumns": [
            "raw_operator_logs",
            "maintenance_personnel_schedules"
          ]
        }
      }
    ],
    [
      "entity_1",
      {
        "id": "entity_1",
        "type": "entity",
        "name": "TreatmentUnit",
        "joinKey": "unit_tag_id",
        "description": "Water treatment process units including clarifiers, filters, disinfection systems, and distribution pumps",
        "tags": [
          "core",
          "process",
          "equipment",
          "operational"
        ],
        "details": {
          "notes": "Unit types: Clarifier, Sand filter, Activated carbon, UV, Chlorination\nProcess: Coagulation, Sedimentation, Filtration, Disinfection\nCapacity: Design and actual throughput\nMaintenance: Scheduled and predictive\nNo PII: Engineering asset data only"
        },
        "x": 400,
        "y": 120,
        "inputs": [],
        "outputs": [
          "fv_1",
          "fv_3"
        ],
        "createdAt": "2026-03-01T08:00:00Z"
      }
    ],
    [
      "entity_2",
      {
        "id": "entity_2",
        "type": "entity",
        "name": "WaterSource",
        "joinKey": "source_intake_id",
        "description": "Raw water sources including dams, rivers, boreholes, and reclaimed water with catchment characteristics",
        "tags": [
          "source",
          "catchment",
          "raw-water",
          "environmental"
        ],
        "details": {
          "notes": "Source types: Surface (dam, river), Groundwater (borehole), Reclaimed\nCatchment: Land use, geology, climate zone\nSeasonality: Rainfall patterns, drought indices\nQuality: Raw water quality baseline\nEnvironmental: Ecosystem and abstraction limits"
        },
        "x": 400,
        "y": 260,
        "inputs": [],
        "outputs": [
          "fv_2",
          "fv_5"
        ],
        "createdAt": "2026-03-01T08:00:00Z"
      }
    ],
    [
      "entity_3",
      {
        "id": "entity_3",
        "type": "entity",
        "name": "ChemicalBatch",
        "joinKey": "batch_lot_number",
        "description": "Chemical treatment batches with dosage, concentration, and reaction tracking",
        "tags": [
          "chemical",
          "dosing",
          "treatment",
          "batch"
        ],
        "details": {
          "notes": "Chemical types: Alum, Lime, Chlorine, PAC, Fluoride\nDosing: Automated and manual adjustment\nReactions: Coagulation, pH correction, disinfection\nSafety: MSDS and handling protocols\nTracking: Batch genealogy and consumption"
        },
        "x": 400,
        "y": 400,
        "inputs": [],
        "outputs": [
          "fv_3"
        ],
        "createdAt": "2026-03-01T08:00:00Z"
      }
    ],
    [
      "entity_4",
      {
        "id": "entity_4",
        "type": "entity",
        "name": "QualitySample",
        "joinKey": "sample_lab_id",
        "description": "Water quality samples from laboratory testing and online monitoring with SANS 241 compliance",
        "tags": [
          "quality",
          "laboratory",
          "compliance",
          "sans-241"
        ],
        "details": {
          "notes": "Parameters: pH, turbidity, chlorine residual, E. coli, nitrates\nStandards: SANS 241 South African drinking water\nSampling: Grab samples and composite\nFrequency: Continuous, hourly, daily per parameter\nCompliance: Blue Drop and Green Drop ratings"
        },
        "x": 400,
        "y": 540,
        "inputs": [],
        "outputs": [
          "fv_4",
          "fv_5"
        ],
        "createdAt": "2026-03-01T08:00:00Z"
      }
    ],
    [
      "fv_1",
      {
        "id": "fv_1",
        "type": "featureview",
        "name": "UnitProcessEfficiency",
        "subtype": "batch",
        "description": "Treatment unit efficiency and performance optimization features",
        "tags": [
          "efficiency",
          "process",
          "optimization",
          "performance"
        ],
        "entities": [
          "entity_1"
        ],
        "features": [
          {
            "name": "hydraulic_loading_rate",
            "type": "Float32"
          },
          {
            "name": "solids_removal_efficiency",
            "type": "Float32"
          },
          {
            "name": "chemical_utilization_ratio",
            "type": "Float32"
          },
          {
            "name": "energy_consumption_kwh_per_m3",
            "type": "Float32"
          },
          {
            "name": "downtime_hours_30d",
            "type": "Float32"
          }
        ],
        "details": {
          "ttl": "14400",
          "notes": "Source: SQL Server SCADA + S3 historical\nEfficiency: Removal rates and throughput\nOptimization: Cost per megaliter treated\nEnergy: Specific energy consumption\nMaintenance: Predictive maintenance indicators"
        },
        "x": 680,
        "y": 260,
        "inputs": [
          "entity_1"
        ],
        "outputs": [
          "service_1",
          "service_2"
        ],
        "createdAt": "2026-03-01T08:00:00Z"
      }
    ],
    [
      "fv_2",
      {
        "id": "fv_2",
        "type": "featureview",
        "name": "SourceVariabilityProfile",
        "subtype": "batch",
        "description": "Raw water source variability and seasonal quality patterns",
        "tags": [
          "variability",
          "seasonal",
          "source",
          "environmental"
        ],
        "entities": [
          "entity_2"
        ],
        "features": [
          {
            "name": "raw_water_turbidity_ntu",
            "type": "Float32"
          },
          {
            "name": "organic_load_cod_mg_l",
            "type": "Float32"
          },
          {
            "name": "algal_bloom_risk_score",
            "type": "Float32"
          },
          {
            "name": "drought_index_category",
            "type": "String"
          },
          {
            "name": "seasonal_abstraction_pattern",
            "type": "String"
          }
        ],
        "details": {
          "ttl": "86400",
          "notes": "Source: MongoDB sensors + PostgreSQL compliance\nVariability: Coefficient of variation per parameter\nSeasonality: Wet vs dry season patterns\nAlgal: Cyanobacteria and toxin risk\nDrought: Dam level and abstraction restrictions"
        },
        "x": 680,
        "y": 540,
        "inputs": [
          "entity_2"
        ],
        "outputs": [
          "service_1"
        ],
        "createdAt": "2026-03-01T08:00:00Z"
      }
    ],
    [
      "fv_3",
      {
        "id": "fv_3",
        "type": "featureview",
        "name": "ChemicalDosingOptimization",
        "subtype": "stream",
        "description": "Real-time chemical dosing optimization and coagulation control",
        "tags": [
          "chemical",
          "dosing",
          "real-time",
          "coagulation"
        ],
        "entities": [
          "entity_1",
          "entity_3"
        ],
        "features": [
          {
            "name": "optimal_alum_dose_mg_l",
            "type": "Float32"
          },
          {
            "name": "jar_test_result_zeta_potential",
            "type": "Float32"
          },
          {
            "name": "ph_adjustment_required",
            "type": "Bool"
          },
          {
            "name": "sludge_volume_forecast",
            "type": "Float32"
          },
          {
            "name": "chemical_cost_per_m3",
            "type": "Float32"
          }
        ],
        "details": {
          "ttl": "3600",
          "notes": "Source: MySQL inventory + SQL Server SCADA\nJar tests: Laboratory and inline streaming current\nOptimization: Dose-response curves\nCost: Chemical and sludge disposal costs\nReal-time: Automated dosing control loops"
        },
        "x": 680,
        "y": 680,
        "inputs": [
          "entity_1",
          "entity_3"
        ],
        "outputs": [
          "service_1"
        ],
        "createdAt": "2026-03-01T08:00:00Z"
      }
    ],
    [
      "fv_4",
      {
        "id": "fv_4",
        "type": "featureview",
        "name": "QualityComplianceForecast",
        "subtype": "batch",
        "description": "Water quality compliance prediction and SANS 241 adherence forecasting",
        "tags": [
          "compliance",
          "forecast",
          "quality",
          "regulatory"
        ],
        "entities": [
          "entity_4"
        ],
        "features": [
          {
            "name": "compliance_probability_24h",
            "type": "Float32"
          },
          {
            "name": "critical_parameter_violation_risk",
            "type": "String"
          },
          {
            "name": "blue_drop_score_forecast",
            "type": "Float32"
          },
          {
            "name": "treatment_barrier_failure_risk",
            "type": "Float32"
          },
          {
            "name": "regulatory_inspection_readiness",
            "type": "String"
          }
        ],
        "details": {
          "ttl": "21600",
          "notes": "Source: PostgreSQL compliance + S3 history\nSANS 241: South African drinking water standard\nBlue Drop: Municipal water quality incentive program\nBarriers: Multiple barrier approach validation\nForecast: 24-72 hour quality prediction"
        },
        "x": 680,
        "y": 120,
        "inputs": [
          "entity_4"
        ],
        "outputs": [
          "service_2"
        ],
        "createdAt": "2026-03-01T08:00:00Z"
      }
    ],
    [
      "fv_5",
      {
        "id": "fv_5",
        "type": "featureview",
        "name": "PredictiveMaintenanceFeatures",
        "subtype": "stream",
        "description": "Equipment health monitoring and predictive maintenance indicators",
        "tags": [
          "maintenance",
          "predictive",
          "equipment",
          "condition"
        ],
        "entities": [
          "entity_1",
          "entity_2"
        ],
        "features": [
          {
            "name": "vibration_anomaly_score",
            "type": "Float32"
          },
          {
            "name": "pump_efficiency_degradation",
            "type": "Float32"
          },
          {
            "name": "filter_head_loss_trend",
            "type": "Float32"
          },
          {
            "name": "membrane_fouling_index",
            "type": "Float32"
          },
          {
            "name": "days_to_maintenance_prediction",
            "type": "Int64"
          }
        ],
        "details": {
          "ttl": "7200",
          "notes": "Source: MongoDB high-frequency sensors\nAnomaly: Statistical process control + ML\nEfficiency: Pump curves and affinity laws\nMembranes: Transmembrane pressure trends\nPrediction: Remaining useful life estimation"
        },
        "x": 680,
        "y": 820,
        "inputs": [
          "entity_1",
          "entity_2"
        ],
        "outputs": [
          "service_2"
        ],
        "createdAt": "2026-03-01T08:00:00Z"
      }
    ],
    [
      "service_1",
      {
        "id": "service_1",
        "type": "service",
        "name": "ProcessOptimizationModelTraining",
        "description": "Training data service for water treatment process optimization and chemical dosing ML models",
        "tags": [
          "process-optimization",
          "chemical-dosing",
          "ml-training",
          "engineering"
        ],
        "features": [
          "fv_1",
          "fv_2",
          "fv_3"
        ],
        "featureServices": [],
        "details": {
          "usedBy": [
            {
              "name": "process-engineering-data-scientists",
              "environment": "Development",
              "sla": "Best effort",
              "contact": "process-ml@watertreatment",
              "description": "Coagulation optimization and energy efficiency model development"
            },
            {
              "name": "operations-research-team",
              "environment": "UAT",
              "sla": "99%",
              "contact": "ops-research@watertreatment",
              "description": "Process simulation and digital twin calibration"
            }
          ],
          "notes": "Purpose: Treatment process optimization and cost reduction\nModels: Neural networks for coagulation, Random forest for energy\nExplainability: SHAP for chemical dosing decisions\nValidation: Jar test correlation and full-scale verification\nSafety: Model outputs validated by process engineers\nCost: Chemical savings and energy reduction targets"
        },
        "x": 960,
        "y": 120,
        "inputs": [
          "fv_1",
          "fv_2",
          "fv_3"
        ],
        "outputs": [],
        "createdAt": "2026-03-01T08:00:00Z"
      }
    ],
    [
      "service_2",
      {
        "id": "service_2",
        "type": "service",
        "name": "ComplianceAndMaintenanceML",
        "description": "ML training data for quality compliance forecasting and predictive maintenance",
        "tags": [
          "compliance",
          "predictive-maintenance",
          "quality-forecasting",
          "regulatory"
        ],
        "features": [
          "fv_1",
          "fv_4",
          "fv_5"
        ],
        "featureServices": [],
        "details": {
          "usedBy": [
            {
              "name": "compliance-data-scientists",
              "environment": "Production",
              "sla": "99%",
              "contact": "compliance-ml@watertreatment",
              "description": "Blue Drop score prediction and regulatory risk assessment"
            },
            {
              "name": "asset-management-team",
              "environment": "Production",
              "sla": "95%",
              "contact": "maintenance-ml@watertreatment",
              "description": "Predictive maintenance and asset life optimization"
            }
          ],
          "notes": "Purpose: Regulatory compliance assurance and asset optimization\nBlue Drop: Municipal water quality incentive rating\nMaintenance: Condition-based maintenance scheduling\nSafety: Critical equipment failure prediction\nPOPIA: Minimal - facility operators only\nExplainability: Regulatory audit trail and maintenance justification"
        },
        "x": 960,
        "y": 540,
        "inputs": [
          "fv_1",
          "fv_4",
          "fv_5"
        ],
        "outputs": [],
        "createdAt": "2026-03-01T08:00:00Z"
      }
    ]
  ],
  "edges": [
    {
      "from": "entity_1",
      "to": "fv_1",
      "id": "entity_1->fv_1",
      "animated": false
    },
    {
      "from": "entity_1",
      "to": "fv_3",
      "id": "entity_1->fv_3",
      "animated": false
    },
    {
      "from": "entity_2",
      "to": "fv_2",
      "id": "entity_2->fv_2",
      "animated": false
    },
    {
      "from": "entity_2",
      "to": "fv_5",
      "id": "entity_2->fv_5",
      "animated": false
    },
    {
      "from": "entity_3",
      "to": "fv_3",
      "id": "entity_3->fv_3",
      "animated": false
    },
    {
      "from": "entity_4",
      "to": "fv_4",
      "id": "entity_4->fv_4",
      "animated": false
    },
    {
      "from": "entity_4",
      "to": "fv_5",
      "id": "entity_4->fv_5",
      "animated": false
    },
    {
      "from": "fv_1",
      "to": "service_1",
      "id": "fv_1->service_1",
      "animated": false
    },
    {
      "from": "fv_1",
      "to": "service_2",
      "id": "fv_1->service_2",
      "animated": false
    },
    {
      "from": "fv_2",
      "to": "service_1",
      "id": "fv_2->service_1",
      "animated": false
    },
    {
      "from": "fv_3",
      "to": "service_1",
      "id": "fv_3->service_1",
      "animated": false
    },
    {
      "from": "fv_4",
      "to": "service_2",
      "id": "fv_4->service_2",
      "animated": false
    },
    {
      "from": "fv_5",
      "to": "service_2",
      "id": "fv_5->service_2",
      "animated": false
    }
  ],
  "exportDate": "2026-03-01T10:00:00Z",
  "version": "3.0"
}
